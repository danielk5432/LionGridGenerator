<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Lions & Contamination Simulator</title>
    <link rel="stylesheet" href="./public/styles.css" />
  </head>
  <body>
    <header>
      <h1>🦁 Lions & Contamination</h1>
      <div class="controls">
        <button id="loadBtn" class="btn-primary">📂 Load Graph</button>
        <button id="startBtn" class="btn-success" disabled>▶ Start</button>
        <button id="moveBtn" class="btn-move" disabled>➡ Move Lions</button>
        <button id="resetBtn" class="btn-danger" disabled>⟲ Reset</button>
      </div>

      <div class="legend">
        <span>🦁 Lion</span>
        <span>🦠 Contamination</span>
      </div>
    </header>

    <main>
      <div id="canvasWrapper">
        <svg id="graph" viewBox="0 0 1000 700" preserveAspectRatio="xMidYMid meet"></svg>
      </div>
      <aside id="sidebar">
        <h3>Instructions</h3>
        <ol>
          <li>위 텍스트 영역에 그래프 JSON을 입력하세요.</li>
          <li>Load Graph 버튼을 눌러 그래프를 로드합니다.</li>
          <li>노드를 클릭해 🦁 배치 (여러 마리 가능, 겹침 가능).</li>
          <li>🦁가 있는 노드를 누른 채 드래그해 방향 화살표를 그립니다.</li>
          <li>Move Lions 버튼을 누르면 모든 🦁가 동시에 이동합니다.</li>
          <li>그 후 🦠이 인접 노드로 1칸 확산합니다. 🦁가 있는 노드에는 퍼지지 않습니다.</li>
        </ol>
        <h3>Graph Input</h3>
        <textarea id="graphInput" placeholder="Enter graph JSON here..." rows="15"></textarea>
        <h3>Available Graphs</h3>
        <div id="graph-list-container"></div>
      </aside>
    </main>

    <div id="debug-output" style="position:fixed; top:10px; right:10px; background:rgba(0,0,0,0.7); color:white; padding:5px; z-index:1000; font-family:monospace; pointer-events:none;">
      Debug Info
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>

    <script type="module" src="./public/main.js"></script>
  </body>
</html>